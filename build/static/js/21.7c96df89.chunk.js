(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{138:function(e,t,a){"use strict";a.d(t,"c",function(){return l}),a.d(t,"d",function(){return p}),a.d(t,"b",function(){return b}),a.d(t,"a",function(){return m});var r=a(86),n=a.n(r),c=a(87),s=a(1),o=a(96),u=a(93),i=a(94),l=function(){return function(){var e=Object(c.a)(n.a.mark(function e(t){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(i.a)()),e.prev=1,e.next=4,o.a.fetchProjects();case 4:if(!(a=e.sent)){e.next=8;break}return t(Object(i.b)()),e.abrupt("return",t({type:s.j,payload:a.data.data}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(Object(i.b)()),"Network Error"===e.t0.message||500===e.t0.response.status?(t(Object(u.b)("Network Error")),t(Object(u.a)())):(t(Object(u.b)(e.t0.response.data.error.message)),t(Object(u.a)()));case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()},p=function(e,t){return function(){var a=Object(c.a)(n.a.mark(function a(r){var c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r(Object(i.a)()),a.prev=1,a.next=4,o.a.updateProject(e,t);case 4:(c=a.sent)&&(r(Object(i.b)()),r(Object(u.c)(c.data.message)),r(Object(u.a)())),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),r(Object(i.b)()),"Network Error"===a.t0.message||500===a.t0.response.status?(r(Object(u.b)("Network Error")),r(Object(u.a)())):(r(Object(u.b)(a.t0.response.data.error.message)),r(Object(u.a)()));case 12:case"end":return a.stop()}},a,null,[[1,8]])}));return function(e){return a.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(n.a.mark(function t(a){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(i.a)()),t.prev=1,t.next=4,o.a.fetchProject(e);case 4:if(!(r=t.sent)){t.next=8;break}return a(Object(i.b)()),t.abrupt("return",a({type:s.i,payload:r.data.data}));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a(Object(i.b)()),"Network Error"===t.t0.message||500===t.t0.response.status?(a(Object(u.b)("Network Error")),a(Object(u.a)())):(a(Object(u.b)(t.t0.response.data.error.message)),a(Object(u.a)()));case 14:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}()},m=function(e,t){return function(){var a=Object(c.a)(n.a.mark(function a(r){var c;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r(Object(i.a)()),a.prev=1,a.next=4,o.a.fetchBusinesses(e,t);case 4:if(!(c=a.sent)){a.next=8;break}return r(Object(i.b)()),a.abrupt("return",r({type:s.d,payload:c.data.data}));case 8:a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),r(Object(i.b)()),"Network Error"===a.t0.message||500===a.t0.response.status?(r(Object(u.b)("Network Error")),r(Object(u.a)())):(r(Object(u.b)(a.t0.response.data.error.message)),r(Object(u.a)()));case 14:case"end":return a.stop()}},a,null,[[1,10]])}));return function(e){return a.apply(this,arguments)}}()}},139:function(e,t,a){"use strict";var r=a(0),n=a.n(r);t.a=function(e){var t=e.tabs,a=e.currentTab,r=void 0===a?0:a,c=e.setCurrentTab;return n.a.createElement("div",{className:"tab-nav-bar row"},t.map(function(e,t){return n.a.createElement("div",{key:t,onClick:function(){return c(t)},className:r===t?"col-sm text-center pointer active":"col-sm pointer text-center"},e.name)}))}},195:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l});var r=a(86),n=a.n(r),c=a(87),s=a(96),o=a(93),u=a(94),i=function(e){return function(){var t=Object(c.a)(n.a.mark(function t(a){var r,c,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a(Object(u.a)()),t.prev=1,(r=new FormData).append("entity_id",e.entity_id),r.append("entity_type",e.entity_type),c=0;c<e.myFiles.length;c++)r.append("files[".concat(c,"][attachment]"),e.myFiles[c]);return t.next=8,s.a.addResources(r);case 8:(i=t.sent)&&(a(Object(u.b)()),a(Object(o.c)(i.data.message)),a(Object(o.a)())),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),a(Object(u.b)()),"Network Error"===t.t0.message||500===t.t0.response.status?(a(Object(o.b)("Network Error")),a(Object(o.a)())):(a(Object(o.b)(t.t0.response.data.error.message)),a(Object(o.a)()));case 16:case"end":return t.stop()}},t,null,[[1,12]])}));return function(e){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(c.a)(n.a.mark(function t(a){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(u.a)()),t.prev=1,t.next=4,s.a.deleteResource(e);case 4:(r=t.sent)&&(a(Object(u.b)()),a(Object(o.c)(r.data.message)),a(Object(o.a)())),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a(Object(u.b)()),"Network Error"===t.t0.message||500===t.t0.response.status?(a(Object(o.b)("Network Error")),a(Object(o.a)())):(a(Object(o.b)(t.t0.response.data.error.message)),a(Object(o.a)()));case 12:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()}},552:function(e,t,a){"use strict";a.r(t);var r=a(86),n=a.n(r),c=a(87),s=a(28),o=a(2),u=a(120),i=a(88),l=a(0),p=a.n(l),b=a(103),m=a.n(b),d=a(3),f=a(100),j=a(139),v=function(e){var t=e.setCurrentTab,a=e.data,r=e.project,n=e.handleChange,c=e.handleUpdate,s=e.loading;return p.a.createElement("div",null,p.a.createElement("form",null,p.a.createElement("div",{className:"mb-4 input-family"},p.a.createElement("label",{htmlFor:"exampleInputPassword1",className:"label"},"Project name"),p.a.createElement("input",{type:"text",name:"title",value:r.title,onChange:n,className:"form-control",id:"exampleInputtext1"})),p.a.createElement("div",{className:"mb-4 input-family"},p.a.createElement("label",{htmlFor:"exampleInputtext1",className:"label"},"Project overview"),p.a.createElement("textarea",{name:"overview",onChange:n,value:r.overview,type:"text",style:{height:200},className:"form-control",id:"exampleInputtext1"})),p.a.createElement("div",{className:"mb-4 input-family"},p.a.createElement("label",{htmlFor:"exampleInputtext1",className:"label"},"Project guide"),p.a.createElement("textarea",{name:"guide",value:r.guide,onChange:n,type:"text",style:{height:200},className:"form-control",id:"exampleInputtext1"}))),p.a.createElement("div",{className:"d-flex justify-content-end"},a?p.a.createElement("button",{onClick:c,style:{marginTop:-10},className:"btn bg-green text-white px-5 py-2 fw-bold"},s?"Loading...":"Save"):p.a.createElement("button",{onClick:function(){return t(1)},style:{marginTop:-10},className:"btn bg-green text-white px-5 py-2 fw-bold"},s?"Loading...":"Save")))},O=function(e){var t=e.getRootProps,a=e.getInputProps,r=e.removeFile,n=e.myFiles,c=e.loading,s=e.addResourcesToTraining,o=e.data,u=e.deleteAProjectResource,i=n.map(function(e){return p.a.createElement("div",{key:e.path,className:"flex-between py-2"},p.a.createElement("p",{className:"fw-bold"},e.path," - ",e.size," bytes"),p.a.createElement("button",{onClick:r(e),style:{border:"1px solid #D5D8DF",fontSize:12},className:"btn"},p.a.createElement("i",{className:"fa fa-close","aria-hidden":"true"})))}),l=o.resources.map(function(e){return p.a.createElement("div",{key:e.id,className:"flex-between py-2"},p.a.createElement("p",{className:"fw-bold"},e.filename),p.a.createElement("button",{onClick:function(){return u(e.id)},style:{border:"1px solid #D5D8DF",fontSize:12},className:"btn"},p.a.createElement("i",{className:"fa fa-close","aria-hidden":"true"})))});return p.a.createElement("div",null,p.a.createElement("div",t({className:"dropzone upload-file-container"}),p.a.createElement("input",a()),p.a.createElement("div",{className:"pointer d-flex flex-column align-items-center"},p.a.createElement("i",{className:"fa fa-upload","aria-hidden":"true"}),p.a.createElement("p",{className:"text-center mt-4"},"Drag and drop files, or Browse"))),p.a.createElement("div",{className:"mt-3"},o&&l,i),p.a.createElement("button",{onClick:s,className:"btn bg-green text-white px-4 py-2 float-end mt-5"},c?"Loading...":"Upload"))},g=a(12),x=a(27),E=a(138),w=a(284),h=a(195);t.default=function(e){var t=e.location,a=t.state?t.state.project:null,r=Object(d.g)(),b=Object(g.c)(),y=Object(x.useToasts)().addToast,N=Object(g.d)(function(e){return e.loadingReducer}),k=Object(g.d)(function(e){return e.projectsReducer}),P=Object(l.useState)({title:"",overview:"",guide:""}),C=Object(i.a)(P,2),T=C[0],F=C[1],D=Object(l.useState)([]),R=Object(i.a)(D,2),I=R[0],S=R[1],_=Object(l.useCallback)(function(e){S([].concat(Object(u.a)(I),Object(u.a)(e)))},[I]),z=Object(w.a)({onDrop:_}),U=z.getRootProps,A=z.getInputProps;Object(l.useEffect)(function(){b(Object(E.b)(a.id)),F({title:k.project.title,overview:k.project.overview,guide:k.project.guide})},[b,a.id,k.project.title,k.project.overview,k.project.guide]);var L=Object(g.d)(function(e){return e.alert}),B=Object(l.useState)(0),J=Object(i.a)(B,2),M=J[0],q=J[1];Object(l.useEffect)(function(){L.message&&(y(L.message,{appearance:"error"}),m()({title:"Error!",text:L.message,icon:"error",button:"close!"})),L.success&&(y(L.success,{appearance:"success"}),m()({title:"Success!",text:L.success,icon:"success",button:"close!"}),r.push("/projects"))},[L.message,L.success,y,r]);var G=function(){var e=Object(c.a)(n.a.mark(function e(t){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b(Object(E.d)(Object(o.a)({},T,{status:1}),k.project.id));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return p.a.createElement("div",null,p.a.createElement(f.a,{title:"Projects"},p.a.createElement("section",{className:"trainings-section"},p.a.createElement("div",null,p.a.createElement("h4",null,p.a.createElement("i",{onClick:function(){return r.push("/projects")},className:"fa fa-angle-left fw-bold pointer","aria-hidden":"true"})," "),p.a.createElement("div",{className:"d-flex flex-between"},p.a.createElement("h5",{className:"fw-bold mt-3"},k.project?"Update Project":"Create New Project")),p.a.createElement("div",{className:"mt-5 px-5 az"},p.a.createElement(j.a,{tabs:[{name:"Project Details"},{name:"Upload resources"}],setCurrentTab:q,currentTab:M}),0===M&&p.a.createElement(v,{data:k.project,project:T,handleChange:function(e){F(Object(o.a)({},T,Object(s.a)({},e.target.name,e.target.value)))},handleUpdate:G,loading:N.loading,setCurrentTab:q}),1===M&&p.a.createElement(O,{addResourcesToTraining:function(){b(Object(h.a)({myFiles:I,entity_id:k.project.id,entity_type:"project"}))},getRootProps:U,getInputProps:A,myFiles:I,removeFile:function(e){return function(){var t=Object(u.a)(I);t.splice(t.indexOf(e),1),S(t)}},data:k.project,deleteAProjectResource:function(e){m()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this file!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(t){t?(b(Object(h.b)(e)),m()("Operation canceled!")):m()("Operation canceled!")})}}))))))}}}]);
//# sourceMappingURL=21.7c96df89.chunk.js.map